@page
@model EmbrujoCerveza.Web.Pages.BeerLots.CreateModel
@using System.Linq
@{
    ViewData["Title"] = "Registrar lote";
}

<h1>Registrar nuevo lote</h1>
<p class="text-muted">Asocia las botellas disponibles a un estilo y tipo de envase.</p>

@if (!Model.BeerStylesSelectList.Any() || !Model.BottleTypesSelectList.Any())
{
    <div class="alert alert-warning">
        Para registrar un lote primero necesitas cargar al menos un estilo de cerveza y un tipo de botella.
        <div class="mt-2 d-flex flex-wrap gap-2">
            <a class="btn btn-sm btn-outline-primary" asp-page="/BeerStyles/Create">Agregar estilo</a>
            <a class="btn btn-sm btn-outline-secondary" asp-page="/BottleTypes/Create">Agregar tipo de botella</a>
        </div>
    </div>
}

<form method="post" class="row g-3">
    <div asp-validation-summary="ModelOnly" class="text-danger"></div>

    <div class="col-md-6">
        <label asp-for="BeerLot.BeerStyleId" class="form-label"></label>
        <select asp-for="BeerLot.BeerStyleId" asp-items="Model.BeerStylesSelectList" class="form-select">
            <option value="">Selecciona un estilo</option>
        </select>
        <span asp-validation-for="BeerLot.BeerStyleId" class="text-danger"></span>
    </div>

    <div class="col-md-6">
        <label asp-for="BeerLot.BottleTypeId" class="form-label"></label>
        <select asp-for="BeerLot.BottleTypeId" asp-items="Model.BottleTypesSelectList" class="form-select">
            <option value="">Selecciona un tipo de botella</option>
        </select>
        <span asp-validation-for="BeerLot.BottleTypeId" class="text-danger"></span>
    </div>

    <div class="col-md-4">
        <label asp-for="BeerLot.BottleCount" class="form-label"></label>
        <input asp-for="BeerLot.BottleCount" class="form-control" />
        <span asp-validation-for="BeerLot.BottleCount" class="text-danger"></span>
    </div>

    <div class="col-md-4">
        <label asp-for="BeerLot.BottledOn" class="form-label"></label>
        <input asp-for="BeerLot.BottledOn" type="date" class="form-control" />
        <span asp-validation-for="BeerLot.BottledOn" class="text-danger"></span>
    </div>

    <div class="col-12">
        <label asp-for="BeerLot.Notes" class="form-label"></label>
        <textarea asp-for="BeerLot.Notes" class="form-control" rows="3" placeholder="Detalles como fecha de vencimiento, partida, etc."></textarea>
        <span asp-validation-for="BeerLot.Notes" class="text-danger"></span>
    </div>

    <div class="col-12 d-flex gap-2">
        <button type="submit" class="btn btn-primary" @( (!Model.BeerStylesSelectList.Any() || !Model.BottleTypesSelectList.Any()) ? "disabled" : "")>Guardar lote</button>
        <a asp-page="Index" class="btn btn-outline-secondary">Cancelar</a>
    </div>
</form>

@section Scripts {
    <partial name="~/Pages/Shared/_ValidationScriptsPartial.cshtml" />
}
